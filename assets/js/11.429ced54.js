(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{434:function(t,a,s){"use strict";s.r(a);var e=s(65),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"curve-chaser-vault-contract"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#curve-chaser-vault-contract"}},[t._v("#")]),t._v(" Curve Chaser Vault Contract")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("curve_apy_vault.vy")]),t._v(" Vyper smart contract contains all the Kallisto Chaser\nVault functionality. The "),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault",target:"_blank",rel:"noopener noreferrer"}},[t._v("source code"),s("OutboundLink")],1),t._v("\nis maintained by the Volume Finance team.")]),t._v(" "),s("h2",{attrs:{id:"swap-routes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swap-routes"}},[t._v("#")]),t._v(" Swap Routes")]),t._v(" "),s("p",[t._v("The Chaser Vault defines swap routes for Curve.\nThe "),s("code",[t._v("SwapRoute")]),t._v(" takes in the addresses of the Curve pools used in the\nswapping, and defines the incoming token as well as the token to swap into.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("struct SwapRoute"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("swap_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("j_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128 # "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" token index\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("j")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128 # out token index\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("is_underlying")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool # "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" exchange underlying coins using "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exchange_underlying")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("is_crypto_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool # "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" token index "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" uint256\n")])])]),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("Parameters")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Key")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("swap_pool")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("swap pool to use for swap")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("j_token")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("out token address from the pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("i")])]),t._v(" "),s("td",[t._v("int128")]),t._v(" "),s("td",[t._v("token index into the pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("j")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("swap pool to use for swap")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("is_underlying")])]),t._v(" "),s("td",[t._v("bool")]),t._v(" "),s("td",[t._v("true if exchange underlying coins using exchange_underlying()")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("is_crypto_pool")])]),t._v(" "),s("td",[t._v("bool")]),t._v(" "),s("td",[t._v("true if token index type is uint256")])])])])]),t._v(" "),s("p",[t._v("The vault locks the balance using the following data type:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("struct LockedBalance"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("end")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n")])])]),s("blockquote",[s("p",[t._v("where "),s("code",[t._v("amount")]),t._v(" is the token amount locked & "),s("code",[t._v("end")]),t._v(" is the end of the lock period.")])]),t._v(" "),s("h2",{attrs:{id:"contract-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#contract-events"}},[t._v("#")]),t._v(" Contract Events")]),t._v(" "),s("h3",{attrs:{id:"erc20-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#erc20-events"}},[t._v("#")]),t._v(" ERC20 events")]),t._v(" "),s("h4",{attrs:{id:"transfer-event"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transfer-event"}},[t._v("#")]),t._v(" Transfer event")]),t._v(" "),s("p",[t._v("Transfers from a destination address to a source address.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("event Transfer"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_from")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_to")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n\n")])])]),s("h4",{attrs:{id:"approval-event"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#approval-event"}},[t._v("#")]),t._v(" Approval event")]),t._v(" "),s("p",[t._v("Grants permission to execute logic.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("event Approval"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_owner")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_spender")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n")])])]),s("h3",{attrs:{id:"vault-events"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vault-events"}},[t._v("#")]),t._v(" Vault events")]),t._v(" "),s("h4",{attrs:{id:"deposit-event"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deposit-event"}},[t._v("#")]),t._v(" Deposit event:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("event Deposit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_from")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("token_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vault_balance")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n")])])]),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("Parameters")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Key")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("token_address")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("Address of deposited token")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("amount")])]),t._v(" "),s("td",[t._v("uint256")]),t._v(" "),s("td",[t._v("deposited amount")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("i")])]),t._v(" "),s("td",[t._v("int128")]),t._v(" "),s("td",[t._v("deposit token index of the main pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("swap_route")])]),t._v(" "),s("td",[t._v("SwapRoute[]")]),t._v(" "),s("td",[t._v("best swap route on Curve")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("min_amount")])]),t._v(" "),s("td",[t._v("uint256")]),t._v(" "),s("td",[t._v("minimum amount of vault balance after deposit")])])])])]),t._v(" "),s("h4",{attrs:{id:"withdrawal-event"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#withdrawal-event"}},[t._v("#")]),t._v(" Withdrawal event:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("event Withdraw"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_from")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("token_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("vault_balance")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n")])])]),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("Parameters")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Key")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("token_address")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("withdrawal token address")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("amount")])]),t._v(" "),s("td",[t._v("uint256")]),t._v(" "),s("td",[t._v("withdrawal vault balance amount (not token amount)")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("i")])]),t._v(" "),s("td",[t._v("int128")]),t._v(" "),s("td",[t._v("withdrawal token index of the main pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("swap_route")])]),t._v(" "),s("td",[t._v("SwapRoute[]")]),t._v(" "),s("td",[t._v("best swap route on Curve")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("min_amount")])]),t._v(" "),s("td",[t._v("uint256")]),t._v(" "),s("td",[t._v("minimum amount of withdrawn token from withdraw")])])])])]),t._v(" "),s("p",[t._v("Event to switch the Chaser vault position from the current Curve pool to\nthe better Curve pool.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("event Updated"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("old_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("new_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("indexed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_timestamp")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256\n")])])]),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("Parameters")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Key")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("_out_token")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("token to withdraw from current pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("old_i")])]),t._v(" "),s("td",[t._v("int128")]),t._v(" "),s("td",[t._v("withdraw token index of current pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("swap_route")])]),t._v(" "),s("td",[t._v("SwapRoute[]")]),t._v(" "),s("td",[t._v("best swap route on Curve")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("new_pool")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("Address of new Curve pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("new_deposit")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("Address of new Curve deposit contract")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("new_i")])]),t._v(" "),s("td",[t._v("int128")]),t._v(" "),s("td",[t._v("deposit token index of new Curve Pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("new_pool_coin_count")])]),t._v(" "),s("td",[t._v("uint8")]),t._v(" "),s("td",[t._v("coin count of new Curve Pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("new_lp_token")])]),t._v(" "),s("td",[t._v("address")]),t._v(" "),s("td",[t._v("Address of new Curve LP token")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("new_is_crypto_pool")])]),t._v(" "),s("td",[t._v("bool")]),t._v(" "),s("td",[t._v("True if new main pool coin index type is uint256")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("new_lp_min_amount")])]),t._v(" "),s("td",[t._v("uint256")]),t._v(" "),s("td",[t._v("minimum amount of new curve lp token")])])])])]),t._v(" "),s("h1",{attrs:{id:"erc20-standard-interfaces"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#erc20-standard-interfaces"}},[t._v("#")]),t._v(" ERC20 Standard Interfaces")]),t._v(" "),s("p",[t._v("The Chaser Vault Contract implements ERC20 interfaces\nand follows the interfaces required to interact with Curve.")]),t._v(" "),s("h2",{attrs:{id:"key-parametes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#key-parametes"}},[t._v("#")]),t._v(" Key Parametes")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Key")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("name")])]),t._v(" "),s("td",[t._v("public(String[64])")]),t._v(" "),s("td",[t._v("token name")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("symbol")])]),t._v(" "),s("td",[t._v("public(String[32])")]),t._v(" "),s("td",[t._v("token symbol")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("balanceOf")])]),t._v(" "),s("td",[t._v("public(HashMap[address, uint256])")]),t._v(" "),s("td",[t._v("amount of tokens held by owner")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("allowance")])]),t._v(" "),s("td",[t._v("public(HashMap[address, HashMap[address, uint256]])")]),t._v(" "),s("td",[t._v("grant approval to transfer to another address")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("totalSupply")])]),t._v(" "),s("td",[t._v("public(uint256)")]),t._v(" "),s("td",[t._v("total token supply")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("paused")])]),t._v(" "),s("td",[t._v("public(bool)")]),t._v(" "),s("td",[t._v("if true, pause modifier will halt function's ability to work")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("main_pool")])]),t._v(" "),s("td",[t._v("public(address)")]),t._v(" "),s("td",[t._v("main curve pool address")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("main_pool_coin_count")])]),t._v(" "),s("td",[t._v("public(uint8)")]),t._v(" "),s("td",[t._v("coin count")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("is_crypto_pool")])]),t._v(" "),s("td",[t._v("public(bool)")]),t._v(" "),s("td",[t._v("true if main pool coin index type is uint256")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("main_deposit")])]),t._v(" "),s("td",[t._v("public(address)")]),t._v(" "),s("td",[t._v("main deposit address for meta pools; (0) for base pools, (1) for lending pools")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("main_lp_token")])]),t._v(" "),s("td",[t._v("public(address)")]),t._v(" "),s("td",[t._v("the main token in the Curve LP address of main pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("validators")])]),t._v(" "),s("td",[t._v("public (HashMap[address, bool])")]),t._v(" "),s("td",[t._v("validators who can update pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("admin")])]),t._v(" "),s("td",[t._v("public(address)")]),t._v(" "),s("td",[t._v("vault admin")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("zap_deposit")])]),t._v(" "),s("td",[t._v("public(address)")]),t._v(" "),s("td",[t._v("ZAP deposit pool address that curve provides")])])])]),t._v(" "),s("h2",{attrs:{id:"key-constants"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#key-constants"}},[t._v("#")]),t._v(" Key Constants")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("Key")]),t._v(" "),s("th",[t._v("Type")]),t._v(" "),s("th",[t._v("Description")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[s("code",[t._v("MAX_COINS = 8")])]),t._v(" "),s("td",[t._v("constant(uint8)")]),t._v(" "),s("td",[t._v("max coins in the Curve pool")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("VETH = 0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE")])]),t._v(" "),s("td",[t._v("constant(address)")]),t._v(" "),s("td",[t._v("virtual ETH address")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("WETH = 0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2")])]),t._v(" "),s("td",[t._v("constant(address)")]),t._v(" "),s("td",[t._v("wrapped ETH address")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("IS_A_POOL_IN_DEPOSIT = 0x0000000000000000000000000000000000000001")])]),t._v(" "),s("td",[t._v("constant(address)")]),t._v(" "),s("td",[t._v("use address(1) as deposit address for aave pools")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("INIT_ZAP_DEPOSIT = 0xA79828DF1850E8a3A3064576f380D90aECDD3359")])]),t._v(" "),s("td",[t._v("constant(address)")]),t._v(" "),s("td",[t._v("initiate ZAP deposit contract address")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("TRUE_BYTES32 = 0x0000000000000000000000000000000000000000000000000000000000000001")])]),t._v(" "),s("td",[t._v("constant(bytes32)")]),t._v(" "),s("td",[t._v("conversion True into bytes32")])]),t._v(" "),s("tr",[s("td",[s("code",[t._v("MAX_SWAP = 4")])]),t._v(" "),s("td",[t._v("constant(uint256)")]),t._v(" "),s("td",[t._v("max count of swap steps")])])])]),t._v(" "),s("h2",{attrs:{id:"interface"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#interface"}},[t._v("#")]),t._v(" Interface")]),t._v(" "),s("h3",{attrs:{id:"crvpool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crvpool"}},[t._v("#")]),t._v(" "),s("code",[t._v("CrvPool")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CrvPool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_liquidity_one_coin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token_amount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exchange")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("j")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_dy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" payable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exchange_underlying")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("j")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_dy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" payable\n")])])]),s("h3",{attrs:{id:"cryptopool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cryptopool"}},[t._v("#")]),t._v(" "),s("code",[t._v("CryptoPool")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CryptoPool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exchange")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("j")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_dy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" payable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("exchange_underlying")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("j")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dx")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_dy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" payable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_liquidity_one_coin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token_amount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n")])])]),s("h3",{attrs:{id:"crvapool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crvapool"}},[t._v("#")]),t._v(" "),s("code",[t._v("CrvAPool")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CrvAPool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_liquidity_one_coin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token_amount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use_underlying")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n")])])]),s("h3",{attrs:{id:"cryptoapool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cryptoapool"}},[t._v("#")]),t._v(" "),s("code",[t._v("CryptoAPool")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CryptoAPool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_liquidity_one_coin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token_amount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("use_underlying")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n")])])]),s("h3",{attrs:{id:"crvzapdeposit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crvzapdeposit"}},[t._v("#")]),t._v(" "),s("code",[t._v("CrvZapDeposit")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CrvZapDeposit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_liquidity_one_coin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_pool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("token_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n")])])]),s("h3",{attrs:{id:"cryptozapdeposit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cryptozapdeposit"}},[t._v("#")]),t._v(" "),s("code",[t._v("CryptoZapDeposit")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CryptoZapDeposit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove_liquidity_one_coin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_pool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("token_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n")])])]),s("h3",{attrs:{id:"liquiditygauge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#liquiditygauge"}},[t._v("#")]),t._v(" "),s("code",[t._v("LiquidityGauge")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LiquidityGauge")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withdraw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n")])])]),s("h3",{attrs:{id:"crvminter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crvminter"}},[t._v("#")]),t._v(" "),s("code",[t._v("CrvMinter")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("CrvMinter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gauge_addr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n")])])]),s("h3",{attrs:{id:"erc20"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#erc20"}},[t._v("#")]),t._v(" "),s("code",[t._v("ERC20")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ERC20")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" view\n")])])]),s("h3",{attrs:{id:"wrappedeth"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wrappedeth"}},[t._v("#")]),t._v(" "),s("code",[t._v("WrappedEth")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WrappedEth")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" payable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withdraw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n")])])]),s("h3",{attrs:{id:"vecrv"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vecrv"}},[t._v("#")]),t._v(" "),s("code",[t._v("VeCRV")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("VeCRV")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increase_unlock_time")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_unlock_time"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increase_amount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create_lock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_unlock_time")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("locked")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("addr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" LockedBalance"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" view\n    def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withdraw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" nonpayable\n\n")])])]),s("h1",{attrs:{id:"vault-initiation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vault-initiation"}},[t._v("#")]),t._v(" Vault Initiation")]),t._v(" "),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/main/contracts/curve_apy_vault.vy#L106",target:"_blank",rel:"noopener noreferrer"}},[t._v("external initiation function"),s("OutboundLink")],1),t._v(" is called to set up the vault by specifying the "),s("strong",[t._v("name")]),t._v(",\n"),s("strong",[t._v("token")]),t._v(", "),s("strong",[t._v("main curve pool")]),t._v(", "),s("strong",[t._v("main deposit address")]),t._v(", "),s("strong",[t._v("main pool coin count")]),t._v(",\nand the "),s("strong",[t._v("curve LP token address of the main pool")]),t._v(",")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("__init__")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_symbol")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" String"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_main_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_main_deposit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_main_pool_coin_count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_main_lp_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_main_liquidity_gauge")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_is_crypto_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("h1",{attrs:{id:"erc20-common-functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#erc20-common-functions"}},[t._v("#")]),t._v(" ERC20 Common Functions")]),t._v(" "),s("details",{staticClass:"custom-block details"},[s("summary",[t._v("Function types")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("@public")]),t._v(": public accessibility")]),t._v(" "),s("li",[s("strong",[t._v("@internal")]),t._v(": only the contract itself and contracts deriving from it can access")]),t._v(" "),s("li",[s("strong",[t._v("@external")]),t._v(": can only be accessed externally")]),t._v(" "),s("li",[s("strong",[t._v("@private")]),t._v(": can be accessed only from the contract itself")])])]),t._v(" "),s("h2",{attrs:{id:"common-internal-functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#common-internal-functions"}},[t._v("#")]),t._v(" Common Internal Functions")]),t._v(" "),s("p",[t._v("Internal functions are defined for minting, burning, safe transfer and safe transfer\nfrom alternative addresses.")]),t._v(" "),s("h3",{attrs:{id:"mint"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mint"}},[t._v("#")]),t._v(" "),s("code",[t._v("mint")])]),t._v(" "),s("p",[t._v("Mints a token specified by its address at a specific amount.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_mint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert _to "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ZERO_ADDRESS")]),t._v(" # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" zero address\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("totalSupply "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" _value\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("balanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" _value\n    log "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ZERO_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"burn"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#burn"}},[t._v("#")]),t._v(" "),s("code",[t._v("burn")])]),t._v(" "),s("p",[t._v("Burn a token specified by its address at a specific amount.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_burn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert _to "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ZERO_ADDRESS")]),t._v(" # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" zero address\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("totalSupply "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" _value\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("balanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" _value\n    log "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ZERO_ADDRESS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"safe-approve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#safe-approve"}},[t._v("#")]),t._v(" "),s("code",[t._v("safe_approve")])]),t._v(" "),s("p",[t._v("Approves the use of a token by a smart contract.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("safe_approve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_token"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_to")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_response")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("raw_call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        _token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("method_id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"approve(address,uint256)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        max_outsize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" failed approve\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        assert "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" failed approve\n\n")])])]),s("h3",{attrs:{id:"safe-transfer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#safe-transfer"}},[t._v("#")]),t._v(" "),s("code",[t._v("safe_transfer")])]),t._v(" "),s("p",[t._v("Transfers a token from the vault to another address.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("safe_transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_token"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_to")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_response")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("raw_call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        _token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("method_id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transfer(address,uint256)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        max_outsize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" failed transfer\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        assert "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" failed transfer\n")])])]),s("h3",{attrs:{id:"safe-transfer-from"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#safe-transfer-from"}},[t._v("#")]),t._v(" "),s("code",[t._v("safe_transfer_from")])]),t._v(" "),s("p",[t._v("Transfers a token from one address to another address.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("safe_transfer_from")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_token"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_from")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_to")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_response")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("raw_call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        _token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("concat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("method_id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transferFrom(address,address,uint256)"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bytes32"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        max_outsize"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("32")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" failed transfer from\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("len")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        assert "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_response"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" failed transfer "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v("\n")])])]),s("h2",{attrs:{id:"common-external-functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#common-external-functions"}},[t._v("#")]),t._v(" Common External Functions")]),t._v(" "),s("p",[t._v("These functions are used for accounting-related purposes.")]),t._v(" "),s("h3",{attrs:{id:"transfer"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transfer"}},[t._v("#")]),t._v(" "),s("code",[t._v("transfer")])]),t._v(" "),s("p",[t._v("Sends tokens from the vault to another address.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_to "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert _to "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ZERO_ADDRESS")]),t._v(" # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" zero address\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("balanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" _value\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("balanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" _value\n    log "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" True\n")])])]),s("h3",{attrs:{id:"transferfrom"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transferfrom"}},[t._v("#")]),t._v(" "),s("code",[t._v("transferFrom")])]),t._v(" "),s("p",[t._v("Sends tokens from one address to another address.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transferFrom")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_from "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_to")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert _to "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ZERO_ADDRESS")]),t._v(" # dev"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" zero address\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("balanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" _value\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("balanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" _value\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" _value\n    log "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _to"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" True\n")])])]),s("h3",{attrs:{id:"approve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#approve"}},[t._v("#")]),t._v(" "),s("code",[t._v("approve")])]),t._v(" "),s("p",[t._v("Sets the amount as the allowance of spender over the caller’s tokens.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("approve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_spender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert _value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" or self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _value\n    log "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Approval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" True\n")])])]),s("h3",{attrs:{id:"increaseallowance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#increaseallowance"}},[t._v("#")]),t._v(" "),s("code",[t._v("increaseAllowance")])]),t._v(" "),s("p",[t._v("Increases the allowance granted to the spender by the caller.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("increaseAllowance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_spender"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowance")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    allowance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" _value\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" allowance\n    log "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Approval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" True\n")])])]),s("h3",{attrs:{id:"decreaseallowance"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#decreaseallowance"}},[t._v("#")]),t._v(" "),s("code",[t._v("decreaseAllowance")])]),t._v(" "),s("p",[t._v("Decreases the allowance granted to the spender by the caller.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("decreaseAllowance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_spender"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("allowance")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    allowance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" _value\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" allowance\n    log "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Approval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _spender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" allowance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" True\n")])])]),s("h3",{attrs:{id:"collect-management-fee"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#collect-management-fee"}},[t._v("#")]),t._v(" "),s("code",[t._v("collect_management_fee")])]),t._v(" "),s("p",[t._v("Collects management fee for using Chaser vault.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect_management_fee")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("fee_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timestamp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("last_management_fee_epoch"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("management_fee"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("totalSupply "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ONE_YEAR")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DENOMINATOR")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" fee_amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n        self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_mint")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fee_amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("last_management_fee_epoch "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("convert")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("block"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("timestamp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" uint40"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("h3",{attrs:{id:"transfer-admin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transfer-admin"}},[t._v("#")]),t._v(" "),s("code",[t._v("transfer_admin")])]),t._v(" "),s("p",[t._v("Transfer the admin address to another one.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer_admin")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_admin"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n# transfer admin permission\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("old_admin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" old_admin and _admin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ZERO_ADDRESS")]),t._v(" and old_admin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" _admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("validators"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("old_admin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" False\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("validators"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" True\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _admin\n")])])]),s("h3",{attrs:{id:"set-validator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-validator"}},[t._v("#")]),t._v(" "),s("code",[t._v("set_validator")])]),t._v(" "),s("p",[t._v("Register a new validator or remove a current validator.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_validator")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_validator"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_value")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("validators"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("_validator"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _value\n")])])]),s("h2",{attrs:{id:"functions-that-interact-with-curve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#functions-that-interact-with-curve"}},[t._v("#")]),t._v(" Functions that Interact with Curve")]),t._v(" "),s("h3",{attrs:{id:"deposit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#deposit"}},[t._v("#")]),t._v(" "),s("code",[t._v("deposit")])]),t._v(" "),s("h4",{attrs:{id:"internal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#internal"}},[t._v("#")]),t._v(" "),s("code",[t._v("@internal")])]),t._v(" "),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/7b4d9a4677b434282b19a39cdf7cba2272ec4b14/contracts/curve_apy_vault.vy#L273",target:"_blank",rel:"noopener noreferrer"}},[t._v("internal deposit function"),s("OutboundLink")],1),t._v(" interacts with\nCurve's smart contracts and adds liquidity for one token into a Curve liquidity pool.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("main_pool_"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_main_deposit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_main_pool_coin_count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("in_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("in_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/7b4d9a4677b434282b19a39cdf7cba2272ec4b14/contracts/curve_apy_vault.vy#L273",target:"_blank",rel:"noopener noreferrer"}},[t._v("internal vote-escrowed deposit function"),s("OutboundLink")],1),t._v(" interacts with\nCurve's smart contracts to add a locked balance as stake into a Curve liquidity pool.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ve_deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("liquidity_gauge"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_crv_balance")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("h4",{attrs:{id:"external"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#external"}},[t._v("#")]),t._v(" "),s("code",[t._v("@external")])]),t._v(" "),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/7b4d9a4677b434282b19a39cdf7cba2272ec4b14/contracts/curve_apy_vault.vy#L477",target:"_blank",rel:"noopener noreferrer"}},[t._v("external deposit function"),s("OutboundLink")],1),t._v(" works as a\nwrapper of the internal deposit and swap functions. It is called when users deposit their\ntokens into the vault. Upon being called, it swaps some of the deposit tokens for the tokens\nrequired by the pool, and adds liquidity.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token_address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("swap_route")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DynArray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SwapRoute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MAX_SWAP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("h3",{attrs:{id:"swap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#swap"}},[t._v("#")]),t._v(" "),s("code",[t._v("swap")])]),t._v(" "),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/7b4d9a4677b434282b19a39cdf7cba2272ec4b14/contracts/curve_apy_vault.vy#L396",target:"_blank",rel:"noopener noreferrer"}},[t._v("internal swap function"),s("OutboundLink")],1),t._v(" interacts with Curve's smart contract and\nuses a Curve liquidity pool to swap one token for another. Upon being called,\nthe function swaps the specified amount of the from_token for the to_token. The\ninputs include the Curve liquidity pool's address, the indices for the from_token\nand to_token, the addresses for the two tokens, the amount to swap for the from_token,\nand whether the pool is a crypto pool.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("pool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("j")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("to_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("is_underlying")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("from_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("is_crypto_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("h3",{attrs:{id:"withdraw"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#withdraw"}},[t._v("#")]),t._v(" "),s("code",[t._v("withdraw")])]),t._v(" "),s("h4",{attrs:{id:"internal-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#internal-2"}},[t._v("#")]),t._v(" "),s("code",[t._v("@internal")])]),t._v(" "),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/main/contracts/curve_apy_vault.vy#L448",target:"_blank",rel:"noopener noreferrer"}},[t._v("internal withdraw function"),s("OutboundLink")],1),t._v(" interacts with the Curve smart contracts directly. It approves\nthe transaction and removes liquidity in one token. The function requires inputs\nspecifying the LP tokens and the main pool address to remove liquidity and returned\ntoken address, index, and the amount.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_withdraw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lp_token"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("_main_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("out_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("out_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("h4",{attrs:{id:"external-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#external-2"}},[t._v("#")]),t._v(" "),s("code",[t._v("@external")])]),t._v(" "),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/7b4d9a4677b434282b19a39cdf7cba2272ec4b14/contracts/curve_apy_vault.vy#L577",target:"_blank",rel:"noopener noreferrer"}},[t._v("external withdraw function"),s("OutboundLink")],1),t._v(" is a wrapper\nof the internal withdraw function. It is called when users withdraw liquidity from the vault.\nThe inputs include withdrawal token address and amount, swap route, and the minimal amount\nfor swapping. Since the users' withdrawal token may differ from the pool's tokens, a swap\nwill be applied in that case.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("withdraw")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("token_address"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("swap_route")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DynArray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SwapRoute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MAX_SWAP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("h3",{attrs:{id:"update-pool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update-pool"}},[t._v("#")]),t._v(" "),s("code",[t._v("update_pool")])]),t._v(" "),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/7b4d9a4677b434282b19a39cdf7cba2272ec4b14/contracts/curve_apy_vault.vy#L616",target:"_blank",rel:"noopener noreferrer"}},[t._v("internal update pool function"),s("OutboundLink")],1),t._v("\nmoves the vault's liquidity from one pool to another one. It first removes liquidity\nfrom the old pool and receives one token. Then, it swaps this token for the new token\nand adds liquidity to the new pool. This is followed by updating the new LP amount.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update_pool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_out_token"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("old_i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("swap_route")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DynArray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SwapRoute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MAX_SWAP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("new_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("new_deposit")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("new_i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("new_pool_coin_count")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("new_lp_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("new_is_crypto_pool")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("new_lp_min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("h3",{attrs:{id:"collect-crv-reward"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#collect-crv-reward"}},[t._v("#")]),t._v(" "),s("code",[t._v("collect_crv_reward")])]),t._v(" "),s("p",[t._v("The\n"),s("a",{attrs:{href:"https://github.com/kallisto-finance/curve-apy-vault/blob/7b4d9a4677b434282b19a39cdf7cba2272ec4b14/contracts/curve_apy_vault.vy#L679",target:"_blank",rel:"noopener noreferrer"}},[t._v("external CRV reward collector function"),s("OutboundLink")],1),t._v(" collects the CRV\nrewards accumulated through the Chaser vault's Curve pool. Each pool has a unique liquidity gauge.\nThe function checks the")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("collect_crv_reward")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("swap_route"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DynArray"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("SwapRoute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("MAX_SWAP")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" int128"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("min_amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" uint256"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n")])])]),s("h2",{attrs:{id:"emergency-functions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#emergency-functions"}},[t._v("#")]),t._v(" Emergency Functions")]),t._v(" "),s("p",[t._v("Emergency functions provide security for the vault and can only be executed by the admin.")]),t._v(" "),s("h3",{attrs:{id:"set-main-pool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-main-pool"}},[t._v("#")]),t._v(" "),s("code",[t._v("set_main_pool")])]),t._v(" "),s("p",[t._v("Used by the admin to set the main pool.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_main_pool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_new_pool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main_pool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _new_pool\n")])])]),s("h3",{attrs:{id:"set-main-deposit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-main-deposit"}},[t._v("#")]),t._v(" "),s("code",[t._v("set_main_deposit")])]),t._v(" "),s("p",[t._v("Used by the admin to set the main deposit.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_main_deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_new_deposit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main_deposit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _new_deposit\n")])])]),s("h3",{attrs:{id:"set-main-pool-coin-count"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-main-pool-coin-count"}},[t._v("#")]),t._v(" "),s("code",[t._v("set_main_pool_coin_count")])]),t._v(" "),s("p",[t._v("Used by the admin to set the pool coin count.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_main_pool_coin_count")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_new_main_pool_coin_count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main_pool_coin_count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _new_main_pool_coin_count\n")])])]),s("h3",{attrs:{id:"set-is-crypto-pool"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-is-crypto-pool"}},[t._v("#")]),t._v(" "),s("code",[t._v("set_is_crypto_pool")])]),t._v(" "),s("p",[t._v("Used by the admin to set the new Curve pool.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_is_crypto_pool")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_new_is_crypto_pool"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("is_crypto_pool "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _new_is_crypto_pool\n")])])]),s("h3",{attrs:{id:"set-main-lp-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-main-lp-token"}},[t._v("#")]),t._v(" "),s("code",[t._v("set_main_lp_token")])]),t._v(" "),s("p",[t._v("Used by the admin to set the main liquidity pool token.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_main_lp_token")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_new_main_lp_token"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main_lp_token "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _new_main_lp_token\n")])])]),s("h3",{attrs:{id:"set-main-liquidity-gauge"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-main-liquidity-gauge"}},[t._v("#")]),t._v(" "),s("code",[t._v("set_main_liquidity_gauge")])]),t._v(" "),s("p",[t._v("Used by admin to se the main liquidity gauge.")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("LiquidityGauge")]),t._v(" measures liquidity provided by users over time,\nin order to distribute CRV and other rewards from staking.")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_main_liquidity_gauge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_new_main_liquidity_gauge"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin and self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main_liquidity_gauge "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ZERO_ADDRESS")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("lp_token")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main_lp_token\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("amount")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" uint256 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ERC20")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lp_token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("balanceOf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("safe_approve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("lp_token"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _new_main_liquidity_gauge"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("LiquidityGauge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_new_main_liquidity_gauge"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("liquidity "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" amount\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("main_liquidity_gauge "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _new_main_liquidity_gauge\n")])])]),s("h3",{attrs:{id:"set-zap-deposit"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#set-zap-deposit"}},[t._v("#")]),t._v(" "),s("code",[t._v("set_zap_deposit")])]),t._v(" "),s("p",[t._v("Used by the admin to set the ZAP deposit.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set_zap_deposit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_new_zap_deposit"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" address"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("zap_deposit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _new_zap_deposit\n")])])]),s("h3",{attrs:{id:"pause"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pause"}},[t._v("#")]),t._v(" "),s("code",[t._v("pause")])]),t._v(" "),s("p",[t._v("Used by the admin to pause all functionality.")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("def "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pause")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_paused"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" bool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("\n    assert msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sender "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("admin\n    self"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("paused "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" _paused\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);